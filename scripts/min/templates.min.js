function drawBargraph(t){var a=t.find(".json").val(),e=t.find(".chart").get(0),n=t.find(".spacing").val(),o=JSON.parse(a),r={top:40,right:40,bottom:60,left:30},i=800-r.left-r.right,l=400-r.top-r.bottom,s=d3.scale.ordinal().rangeRoundBands([0,i],n),c=d3.scale.linear().range([l,0]),d=d3.svg.axis().scale(s).orient("bottom"),p=d3.svg.axis().scale(c).orient("left").ticks(10),u=d3.select(e).append("svg").attr("width",i+r.left+r.right).attr("height",l+r.top+r.bottom).append("g").attr("transform","translate("+r.left+","+r.top+")");s.domain(o.map(function(t){return t.label})),c.domain([0,d3.max(o,function(t){return t.value})]),u.append("g").attr("class","x axis").attr("transform","translate(0,"+l+")").call(d),u.append("g").attr("class","y axis").call(p),u.selectAll("bar").data(o).enter().append("rect").attr("x",function(t){return s(t.label)}).attr("width",s.rangeBand()).attr("y",function(t){return c(t.value)}).attr("height",function(t){return l-c(t.value)})}function drawMap(t){var a=a||window.parent.snowball,e=a.pluginsUrl+"/lib/d3-geomap",n=t.find(".json-usa").val(),o=t.find(".map").get(0),r=parseInt(t.find("input.quantize").val()),i=t.find("input.color").val(),l=colorbrewer[i][r],s=t.find(".map-type").val(),c=e+"/topojson/countries/USA.json",d=d3.geo.albersUsa,p=800;if("world"===s&&(n=t.find(".json-world").val(),c=e+"/topojson/world/countries.json",d=d3.geo.equirectangular,p=100),n){t.find(".map").empty();var u=d3.geomap.choropleth().geofile(c).projection(d).column("Value").unitId("fips").scale(p).translate([400,200]).colors(l).legend(!0);d3.select(o).datum(JSON.parse(n)).call(u.draw,u).selectAll("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 500 400")}}function drawScatterplot(t){var a=t.find(".json").val();if(a){var e=t.find(".chart").get(0),n=t.find(".size").val(),o=JSON.parse(a),r=[],i=[],l=[];o.forEach(function(t){r.push([t.X,t.Y]),i.push(t.X),l.push(t.Y)});var s={top:40,right:40,bottom:60,left:60},c=800-s.left-s.right,d=400-s.top-s.bottom,p=d3.scale.linear().domain([0,d3.max(i)]).range([0,c]),u=d3.scale.linear().domain([0,d3.max(l)]).range([d,0]),f=d3.select(e).append("svg:svg").attr("width",c+s.right+s.left).attr("height",d+s.top+s.bottom).attr("class","chart"),h=f.append("g").attr("transform","translate("+s.left+","+s.top+")").attr("width",c).attr("height",d).attr("class","main"),m=d3.svg.axis().scale(p).orient("bottom");h.append("g").attr("transform","translate(0,"+d+")").attr("class","main axis date").call(m);var w=d3.svg.axis().scale(u).orient("left");h.append("g").attr("transform","translate(0,0)").attr("class","main axis date").call(w);var g=h.append("svg:g");g.selectAll("scatter-dots").data(l).enter().append("svg:circle").attr("cy",function(t){return u(t)}).attr("cx",function(t,a){return p(i[a])}).attr("r",n)}}function createTweet(t){var a=t.find(".tweet").empty(),e=a.attr("data-id");if(e){var n=a.attr("data-theme"),o=a.attr("data-linkColor"),r=a.attr("data-cards")?a.attr("data-cards"):"show",i=a.attr("data-conversation")?a.attr("data-conversation"):"show";twttr.widgets.createTweet(e,a[0],{theme:n,linkColor:o,cards:r,conversation:i,align:"center"})}}!function(t){t(document).ready(function(){var a=t(".snowball-block-bargraph");a.each(function(){drawBargraph(t(this))})})}(jQuery),function(t){t(document).ready(function(){var a=t(".snowball-block-choropleth");a.each(function(){drawMap(t(this))})})}(jQuery),function(t){t(document).ready(function(){t("body").on("click",".snowball-block-contact .submit",function(){var a=t(this).closest("form"),e=a.find("[name='to']").val(),n=a.find("[name='subject']").val(),o=a.find("[name='confirmation']").val(),r="",i=a.find("input, textarea").not("[type='hidden']");i.each(function(){var a=t(this).val();r=t(this).attr("name")?r+"\n\n"+t(this).attr("name")+": "+a:r+"\n\n"+a});var l={action:"mail_before_submit",to:e,subject:n,message:r};window.parent&&(snowball=window.parent.snowball),jQuery.post(snowball.adminUrl+"admin-ajax.php",l,function(t){a.text(o)})})})}(jQuery),function(t){t(document).ready(function(){t(".snowball-block-imageslider .left").css("width","50%")}),t(document).on("mousemove",".snowball-block-imageslider .wrapper",function(a){var e=t(this).closest(".snowball-block"),n=e.find(".left")[0],o=e.find("img")[0],r=e.find(".label-left"),i=e.find(".label-right"),l=o.getBoundingClientRect(),s=(a.pageX-l.left)/l.width*100;100>=s&&(n.style.width=s+"%",20>=s?r.hide():r.show(),s>=80?i.hide():i.show())})}(jQuery),function(t){t(document).ready(function(){var a=t(".snowball-block-scatterplot");a.each(function(){drawScatterplot(t(this))})})}(jQuery),function(t){t(document).ready(function(){t("body").on("click",".snowball-block-share .button",function(){var t,a=a||window.parent.snowball,e=jQuery(this),n=500,o=400,r=screen.width/2-n/2,i=screen.height/2-o/2,l="toolbar=0,status=0,width="+n+",height="+o+",top="+i+",left="+r;t=e.hasClass("facebook")?"http://www.facebook.com/sharer.php?u="+encodeURIComponent(a.url):e.hasClass("twitter")?"http://twitter.com/share?url="+encodeURIComponent(a.url)+"&text="+encodeURIComponent(a.title):e.hasClass("tumblr")?"https://www.tumblr.com/widgets/share/tool?posttype=link&canonicalUrl="+encodeURIComponent(a.url)+"&title="+encodeURIComponent(a.title)+"&content="+encodeURIComponent(a.excerpt):"https://plus.google.com/share?url="+encodeURIComponent(a.url),window.open(t,"share",l)})})}(jQuery),function(t){var a="https://platform.twitter.com/widgets.js";t.getScript(a,function(){t(".snowball-block-twitter").each(function(){createTweet(t(this))})})}(jQuery);
//# sourceMappingURL=templates.min.js.map