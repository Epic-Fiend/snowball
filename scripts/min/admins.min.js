!function(n){function t(t){var o,a=t.find(".table").get(0),i=t.find("[data-target='map-type']").val();if(o="usa"===i?t.find("[data-target='json-usa']").val():t.find("[data-target='json-world']").val()){var l=JSON.parse(o);e(t,a,l,i)}else{var r=snowball.pluginsUrl+"/modules/choropleth/precipitation-"+i+".json";n.getJSON(r,function(n){e(t,a,n,i)})}}function o(t,o){var e,a,i=(t.find(".table").get(0),t.data("hot"));if("usa"===o?(a=t.find("[data-target='json-usa']").val(),e=["fips","State","Value"]):(a=t.find("[data-target='json-world']").val(),e=["fips","Country","Value"]),a){var l=JSON.parse(a);i.updateSettings({colHeaders:e}),i.loadData(l),i.render()}else{var r=snowball.pluginsUrl+"/modules/choropleth/precipitation-"+o+".json";n.getJSON(r,function(n){i.updateSettings({colHeaders:e}),i.loadData(n),i.render()})}}function e(n,t,o,e){var i=["fips","Country","Value"];"usa"===e&&(i=["fips","State","Value"]);var l=new Handsontable(t,{data:o,rowHeaders:!1,fixedRowsTop:0,colHeaders:i,columns:[{data:"fips",readOnly:!0},{data:"State",readOnly:!0},{data:"Value"}],columnSorting:!1,manualColumnMove:!1,manualColumnResize:!1,contextMenu:!0,multiSelect:!0,persistantState:!0,fillHandle:!0,observeChanges:!0,search:!0,undo:!0,readOnly:!1,stretchH:"all",afterChange:function(t,o){var e=this.getData();a(n,e),"loadData"!==o&&n.trigger("render")},afterLoadData:function(){var t=this.getData();a(n,t)},afterInit:function(){n.trigger("render")}});n.data("hot",l)}function a(n,t,o){var e=t,a=JSON.stringify(e),i=n.find("[data-target='map-type']").val();n.find("[data-target='json-"+i+"']").val(a)}n("#snowball-main").on("open",".snowball-block-choropleth",function(){var o=n(this),e=o.find("[data-target='quantize']").val();n(this).find(".quantize-output").text(e),t(o)}),n("#snowball-main").on("rendered",".snowball-block-choropleth",function(){var t=n(this),o=t.find(".snowball-preview"),e=o.contents().find(".map"),a=o[0].contentWindow.drawMap;e&&a&&a(o.contents().find(".snowball-block-choropleth"))}),n("#snowball-main").on("change",".snowball-block-choropleth [data-target='map-type']",function(){var t=n(this).closest(".snowball-block-choropleth"),e=n(this).val();o(t,e)}),n("#snowball-main").on("input change",".snowball-block-choropleth [data-target='quantize']",function(){var t=n(this).closest(".snowball-block-choropleth"),o=(t.data("hot"),n(this).val());t.find(".quantize-output").text(o)})}(jQuery),function(n){function t(t){var e=t.find(".table").get(0),a=t.find("[data-target='json']").val();if(a){var i=JSON.parse(a);o(t,e,i)}else{var l=snowball.pluginsUrl+"/modules/bargraph/snowline.json";n.getJSON(l,function(n){o(t,e,n)})}}function o(n,t,o){var a=["Label","Values"],i=[{data:"label",type:"text"},{data:"value",type:"numeric"}],l=new Handsontable(t,{data:o,rowHeaders:!1,fixedRowsTop:0,colHeaders:a,columns:i,columnSorting:!1,manualColumnMove:!1,manualColumnResize:!1,contextMenu:!0,multiSelect:!0,persistantState:!0,fillHandle:!0,observeChanges:!0,search:!0,undo:!0,readOnly:!1,stretchH:"all",afterChange:function(t,o){var a=this.getData();e(n,a),"loadData"!==o&&n.trigger("render")},afterLoadData:function(){var t=this.getData();e(n,t)},afterInit:function(){n.trigger("render")}});n.data("hot",l)}function e(n,t,o){var e=t,a=JSON.stringify(e);n.find("[data-target='json']").val(a)}n("#snowball-main").on("open",".snowball-block-bargraph",function(){var o=n(this),e=Math.floor(100*n(this).find(".spacing").val())+"%";n(this).find(".spacing-output").text(e),t(o)}),n("#snowball-main").on("input change",".snowball-block-bargraph .spacing",function(){var t=n(this).closest(".snowball-block-bargraph"),o=Math.floor(100*n(this).val())+"%";t.find(".spacing-output").text(o),t.trigger("render")}),n("#snowball-main").on("rendered",".snowball-block-bargraph",function(){var t=n(this),o=t.find(".snowball-preview"),e=o.contents().find(".chart"),a=o[0].contentWindow.drawBargraph;e&&a&&a(o.contents().find(".snowball-block-bargraph"))})}(jQuery),function(n){function t(n){var t=CodeMirror.fromTextArea(n[0],{mode:"htmlmixed",lineNumbers:!0,lineWrapping:!0,indentUnit:2,tabSize:2,theme:"monokai"});t.setSize("100%","100%"),t.on("change",function(){t.save(),n.trigger("change")}),n.data("codeMirrorInstance",t)}function o(o,e){o.find(".toggle-button").eq(e).addClass("show");var a=o.find(".column-textarea").eq(e);t(a),o.find(".toggle-buttons .toggle-button").each(function(t){t===e?n(this).addClass("active"):n(this).removeClass("active")}),o.find(".snowball-tinker .CodeMirror").each(function(t){t===e?n(this).show():n(this).hide()});var i=o.find('[type="checkbox"]').eq(e);i.prop("checked",!0)}function e(t,o){t.find(".show").each(function(t){t===o?n(this).addClass("active"):n(this).removeClass("active")})}function a(t,o){t.find(".snowball-tinker .CodeMirror").each(function(t){t===o?n(this).show():n(this).hide()})}n("#snowball-main").on("open",".snowball-block-columns",function(){var o=n(this);o.find('input[type="checkbox"]').each(function(e){if(n(this).prop("checked")){var a=o.find(".column-textarea").eq(e);t(a),o.find(".toggle-button").eq(e).addClass("show")}}),o.find(".CodeMirror").hide().eq(0).show(),o.find(".toggle-button").eq(0).addClass("active");var e=o.find(".show").length;4==e&&o.find(".add-button").hide(),1==e&&o.find(".show .delete-column").hide()}),n("#snowball-main").on("click",".snowball-block-columns .toggle-button",function(t){var o=n(this).closest(".snowball-block-columns"),i=o.find(".toggle-buttons .toggle-button").index(n(this));e(o,i),a(o,i)}),n("#snowball-main").on("click",".snowball-block-columns .add-button",function(t){var e=n(this).closest(".snowball-block-columns"),a=e.find(".show").length;1==a&&e.find(".toggle-button").eq(0).find("span").fadeIn("500"),3==a&&e.find(".add-button").fadeOut(500),e.find('[type="checkbox"]').each(function(t){return n(this).prop("checked")?void 0:(o(e,t),!1)}),e.trigger("render")}),n("#snowball-main").on("click",".snowball-block-columns .delete-column",function(o){if(o.stopPropagation(),confirm("Are you sure you want to delete this column?")){var i,l,r,s=n(this).closest(".snowball-block-columns"),d=n(this).closest(".toggle-button"),c=s.find(".toggle-buttons .toggle-button").index(d),u=s.find(".show").length;if(2==u&&s.find(".toggle-button").eq(0).find("span").fadeOut("fast"),c==u-1)i=s.find(".column-textarea").eq(c),l=i.data("codeMirrorInstance"),r=s.find('[type="checkbox"]').eq(c),r.prop("checked",!1),l.toTextArea(),i.val(""),s.find(".show").eq(c).removeClass("show"),s.find(".CodeMirror").eq(c-1).show();else for(;u-1>c;){i=s.find(".column-textarea").eq(c),l=i.data("codeMirrorInstance"),l.toTextArea(),r=s.find('[type="checkbox"]').eq(c),r.prop("checked",!0);var f=s.find(".column-textarea").eq(c+1),b=f.data("codeMirrorInstance");b.toTextArea();var h=s.find('[type="checkbox"]').eq(c+1);h.prop("checked",!1),i.val(f.val()),t(i),c==u-2&&(s.find(".show").eq(c+1).removeClass("show"),u=s.find(".show").length,s.find(".column-textarea").eq(c+1).val("")),c+=1}s.trigger("render"),e(s,c-1),a(s,c-1)}n(this).closest(".snowball-block-columns").find(".add-button").fadeIn(500)})}(jQuery),function(n){function t(t){var e=o();"undefined"==typeof t?n(".snowball-block-contents").each(function(){var t=n(this);n(this).find(".html").val(e),t.trigger("render")}):(t.find(".html").val(e),t.trigger("render"))}function o(){var t=[],o="<ul>";return n(".snowball-block").each(function(){var o=n(this).find(".snowball-title").text(),e="[id]",a=n(this).find(".snowball-preview").contents().find(e);"Contents"!==o&&a.each(function(){var o={id:n(this).attr("id"),text:n(this).text()};t.push(o)})}),t.forEach(function(n,t){var e="<li><a href='#"+n.id+"'>"+n.text+"</a></li>";o+=e}),o+="</ul>"}n(document).ready(function(){t()}),n("#snowball-main").on("rendered",".snowball-block",function(){n(this).hasClass("snowball-block-contents")||t()}),n("#snowball-main").on("open",".snowball-block-contents",function(){t(n(this))})}(jQuery),function(n){function t(n){var t=/google.com\/maps\/.*@(-?\d+.\d+),(-?\d+.\d+),(\d+)([mz])/,e=t.exec(n);if(null!==e){var a=e[3],i=e[4],l="600x400";return"m"===i?(i="satellite",a=o(a)):i="roadmap",{lat:e[1],lon:e[2],maptype:i,zoom:a,size:l}}}function o(n){var t=56819712,o=t/parseInt(n,10);return o=Math.round(1+Math.log(o)/Math.LN2)}n("#snowball-main").on("open",".snowball-block-googlemaps",function(){var t=n(this).find(".zoom").val();n(this).find(".zoom-output").text(t)}),n("#snowball-main").on("change keyup",".snowball-block-googlemaps .map-user",function(){var o=n(this).closest(".snowball-block-googlemaps"),e=n(this).val(),a=t(e);o.find("[data-target='lat']").val(a.lat),o.find("[data-target='lon']").val(a.lon),o.find("[data-target='zoom']").val(a.zoom),o.find(".zoom-output").text(a.zoom),o.find("[data-target='maptype'][value='"+a.maptype+"']").prop("checked",!0),o.trigger("render")}),n("#snowball-main").on("input change",".snowball-block-googlemaps .zoom",function(){var t=n(this).closest(".snowball-block-googlemaps"),o=n(this).val();t.find(".zoom-output").text(o)})}(jQuery),function(n){n("#snowball-main").on("open",".snowball-block-html",function(){var t=n(this),o=t.find("textarea"),e=CodeMirror.fromTextArea(o[0],{mode:"htmlmixed",lineNumbers:!0,lineWrapping:!0,indentUnit:2,tabSize:2,theme:"monokai"});e.setSize("100%","100%"),e.on("change",function(){e.save(),o.trigger("change")})})}(jQuery),function(n){n("#snowball-main").on("open",".snowball-block-image",function(){var t=n(this).find(".img-border-radius").val()+"%";n(this).find(".img-border-radius-output").text(t)}),n(document).ready(function(){var t;n("#snowball-main").on("click",".snowball-block-image .upload-image-button",function(){var o=n(this).closest(".snowball-block");return t=n(".snowball-block").index(o),tb_show("","media-upload.php?type=image&TB_iframe=true"),window.original_send_to_editor=window.send_to_editor,window.send_to_editor=function(o){var e=n(".snowball-block").eq(t);imgurl=n("img",o).attr("src"),e.find(".upload-image").val(imgurl).trigger("change"),tb_remove(),window.send_to_editor=window.original_send_to_editor},!1}),n("#snowball-main").on("input change",".snowball-block-image .img-border-radius",function(){var t=n(this).closest(".snowball-block-image"),o=n(this).val()+"%";t.find(".img-border-radius-output").text(o),t.trigger("render")})})}(jQuery),function(n){n("#snowball-main").on("open",".snowball-block-imageslider",function(){var t=n(this).find(".img-border-radius").val()+"%";n(this).find(".img-border-radius-output").text(t)}),n(document).ready(function(){var t;n("#snowball-main").on("click",".snowball-block-imageslider .upload-image-button",function(){var o=n(this).closest(".snowball-block");t=n(".snowball-block").index(o);var e=o.find(".upload-image-button").index(n(this));return tb_show("","media-upload.php?type=image&TB_iframe=true"),window.original_send_to_editor=window.send_to_editor,window.send_to_editor=function(o){var a=n(".snowball-block").eq(t);imgurl=n("img",o).attr("src"),a.find(".upload-image").eq(e).val(imgurl).trigger("change"),tb_remove(),window.send_to_editor=window.original_send_to_editor},!1})})}(jQuery),function(n){function t(t){var e=t.find(".table").get(0),a=t.find("[data-target='json']").val();if(a){var i=JSON.parse(a);o(t,e,i)}else{var l=snowball.pluginsUrl+"/modules/scatterplot/snowline.json";n.getJSON(l,function(n){o(t,e,n)})}}function o(n,t,o){var a=["Label","X","Y"],i=[{data:"Label",type:"text"},{data:"X",type:"numeric"},{data:"Y",type:"numeric"}],l=new Handsontable(t,{data:o,rowHeaders:!1,fixedRowsTop:0,colHeaders:a,columns:i,columnSorting:!1,manualColumnMove:!1,manualColumnResize:!1,contextMenu:!0,multiSelect:!0,persistantState:!0,fillHandle:!0,observeChanges:!0,search:!0,undo:!0,readOnly:!1,stretchH:"all",afterChange:function(t,o){var a=this.getData();e(n,a),"loadData"!==o&&n.trigger("render")},afterLoadData:function(){var t=this.getData();e(n,t)},afterInit:function(){n.trigger("render")}});n.data("hot",l)}function e(n,t,o){var e=t,a=JSON.stringify(e);n.find("[data-target='json']").val(a)}n("#snowball-main").on("open",".snowball-block-scatterplot",function(){var o=n(this),e=n(this).find(".size").val()+"px";n(this).find(".size-output").text(e),t(o)}),n("#snowball-main").on("input change",".snowball-block-scatterplot .size",function(){var t=n(this).closest(".snowball-block-scatterplot"),o=n(this).val()+"px";t.find(".size-output").text(o),t.trigger("render")}),n("#snowball-main").on("rendered",".snowball-block-scatterplot",function(){var t=n(this),o=t.find(".snowball-preview"),e=o.contents().find(".chart"),a=o[0].contentWindow.drawScatterplot;e&&a&&a(o.contents().find(".snowball-block-scatterplot"))})}(jQuery),function(n){function t(n){var t;if(n&&n.indexOf("api.soundcloud.com/tracks")>=0){t=/api.soundcloud.com\/tracks\/(\d+&)/;var o=t.exec(n);if(o[1])return o[1]}return""}function o(n,t){var o="https://w.soundcloud.com/player/?url=https://api.soundcloud.com/tracks/";o=o+n+"&show_reposts=false&auto_play=false";for(var e in t)t.hasOwnProperty(e)&&(o=o+"&"+e+"="+t[e]);return o}n("#snowball-main").on("open",".snowball-block-soundcloud",function(){var e=n(this).closest(".snowball-block-soundcloud"),a=n(e).find("input[data-target=embed-link]").val(),i=(n(e).find(".snowball-preview").contents().find(".embed-iframe"),n(e).find("input[data-target=show-user]").prop("checked")),l=n(e).find("input[data-target=show-comments]").prop("checked"),r=n(e).find("input[data-target=visual]").prop("checked"),s={show_user:i,show_comments:l,visual:r},d=t(a),c=o(d,s);n(e).find(".track-url").val(c),e.trigger("render")}),n("#snowball-main").on("change keyup",".snowball-block-soundcloud",function(){var e=n(this).closest(".snowball-block-soundcloud"),a=n(e).find("input[data-target=embed-link]").val(),i=(n(e).find(".snowball-preview").contents().find(".embed-iframe"),n(e).find("input[data-target=show-user]").prop("checked")),l=n(e).find("input[data-target=show-comments]").prop("checked"),r=n(e).find("input[data-target=visual]").prop("checked"),s={show_user:i,show_comments:l,visual:r},d=t(a),c=o(d,s);n(e).find(".track-url").val(c),e.trigger("render")})}(jQuery),function(n){var t=0;n("#snowball-main").on("open",".snowball-block-splash",function(){var o=n(this).find("textarea"),e="snowball-block-splash-textarea-"+t;o.attr("id",e),t++,quicktags({id:e,buttons:"strong,em,link,blockquote,del,code,close"}),QTags._buttonsInit()}),n("#snowball-main").on("click",".snowball-block-splash .quicktags-toolbar .button",function(){n(this).closest(".snowball-block").trigger("render")}),n(document).ready(function(){var t;n("#snowball-main").on("click",".snowball-block-splash .upload-image-button",function(){var o=n(this).closest(".snowball-block");return t=n(".snowball-block").index(o),tb_show("","media-upload.php?type=image&TB_iframe=true"),window.original_send_to_editor=window.send_to_editor,window.send_to_editor=function(o){var e=n(".snowball-block").eq(t);imgurl=n("img",o).attr("src"),e.find(".upload-image").val(imgurl).trigger("change"),tb_remove(),window.send_to_editor=window.original_send_to_editor},!1})})}(jQuery),function(n){function t(n,t){var e=JSON.stringify(t);n.find("[data-target='JSON']").val(e),n.find("[data-target='HTML']").val(o(t)),n.find(".handsontableInput").trigger("change")}function o(n){for(var t="  <table>\n",o=n.length,e=0;o>e;e++){0===e?t+="    <thead>\n":1===e&&(t+="    </thead>\n    <tbody>\n"),t+="      <tr>\n";for(var a=0;a<n[e].length;a++)null===n[e][a]&&(n[e][a]=""),t=0===e?t+"        <th>"+n[e][a]+"</th>\n":t+"        <td>"+n[e][a]+"</td>\n";t+="      </tr>\n"}return t+="    </tbody>\n  </table>"}n("#snowball-main").on("open",".snowball-block-table",function(){var o=n(this),e=o.find(".table").get(0),a=JSON.parse(o.find("[data-target='JSON']").val()),i=new Handsontable(e,{data:a,rowHeaders:!1,fixedRowsTop:1,colHeaders:!0,columnSorting:!1,manualColumnMove:!1,manualColumnResize:!1,contextMenu:!0,multiSelect:!0,persistantState:!0,fillHandle:!0,observeChanges:!0,search:!0,undo:!0,readOnly:!1,stretchH:"all",afterInit:function(n){t(o,a),o.trigger("render")},afterChange:function(n){t(o,a)},afterCreateRow:function(n){t(o,a)},afterCreateCol:function(n){t(o,a)},afterRemoveRow:function(n){t(o,a)},afterRemoveCol:function(n){t(o,a)}});o.data("hot",i)})}(jQuery),function(n){var t=0;QTags.addButton("eg_hr","hr","<hr />","","h","Horizontal rule line",70),n("#snowball-main").on("open",".snowball-block-text",function(){var o=n(this).find("textarea"),e="snowball-block-text-textarea-"+t;o.attr("id",e),t++,quicktags({id:e,buttons:"strong,em,link,blockquote,del,code,ul,ol,li,code,close"}),QTags._buttonsInit()}),n("#snowball-main").on("click",".snowball-block-text .quicktags-toolbar .button",function(){n(this).closest(".snowball-block").trigger("render")})}(jQuery),function(n){function t(n){var t=/^https?:\/\/twitter.com\/(\w+)\/status(es)?\/(\d+)$/,o=t.exec(n);return o&&o[3]?o[3]:""}n("#snowball-main").on("open",".snowball-block-twitter",function(){var o=n(this).find("[data-target='tweet-url']").val().trim(),e=t(o);n(this).find("[data-target='id']").val(e),n(this).trigger("render")}),n("#snowball-main").on("change keyup",".snowball-block-twitter [data-target='tweet-url']",function(){var o=n(this).closest(".snowball-block-twitter"),e=n(this).val().trim(),a=t(e);o.find("[data-target='id']").val(a)}),n("#snowball-main").on("rendered",".snowball-block-twitter",function(){var t=n(this),o=t.find(".snowball-preview"),e=o[0].contentWindow.createTweet;e&&e(o.contents().find(".snowball-block-twitter"))})}(jQuery),function(n){function t(n){var t;t=n.indexOf("video")>=0?/vimeo.com.*video\/(\S*)"/:/vimeo.com\/(.*)/;var o=t.exec(n);return o[1]}n("#snowball-main").on("open",".snowball-block-vimeo",function(){var o=n(this).find(".video-url").val(),e=t(o);n(this).find(".video-id").val(e),n(this).trigger("render")}),n("#snowball-main").on("change keyup",".snowball-block-vimeo .video-url",function(){var o=n(this).closest(".snowball-block-vimeo"),e=n(this).val(),a=t(e);o.find(".video-id").val(a),o.trigger("render")}),n("#snowball-main").on("change keyup",".snowball-block-vimeo [data-target='control-color-input']",function(){var t=(n(this).closest(".snowball-block-vimeo"),n(this).val()),o="&color="+t.substring(1);n("[data-target='control-color-output']").val(o)})}(jQuery),function(n){function t(n){var t;t=n.indexOf("embed")>=0?/vine.co\/v\/(.*)\/embed/:/vine.co\/v\/(.*)/;var o=t.exec(n);return o[1]}n("#snowball-main").on("open",".snowball-block-vine",function(){var o=n(this).find(".video-url").val(),e=t(o);n(this).find(".video-id").val(e),n(this).trigger("render")}),n("#snowball-main").on("change keyup",".snowball-block-vine .video-url",function(){var o=n(this).closest(".snowball-block-vine"),e=n(this).val(),a=t(e);o.find(".video-id").val(a),o.trigger("render")})}(jQuery),function(n){function t(n){var t;t=n.indexOf("embed")>=0?/youtube.com.*embed\/(\S*)"/:/youtube.com.*v=(.*)/;var o=t.exec(n);return o[1]}n("#snowball-main").on("open",".snowball-block-youtube",function(){var o=n(this).find(".video-url").val(),e=t(o);n(this).find(".video-id").val(e),n(this).trigger("render")}),n("#snowball-main").on("change keyup",".snowball-block-youtube .video-url",function(){var o=n(this).closest(".snowball-block-youtube"),e=n(this).val(),a=t(e);o.find(".video-id").val(a),o.trigger("render")})}(jQuery);
//# sourceMappingURL=admins.min.js.map